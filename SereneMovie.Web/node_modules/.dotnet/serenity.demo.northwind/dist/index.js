var fn=Object.create;var Ut=Object.defineProperty,yn=Object.defineProperties,Xo=Object.getOwnPropertyDescriptor,gn=Object.getOwnPropertyDescriptors,hn=Object.getOwnPropertyNames,mr=Object.getOwnPropertySymbols,Rn=Object.getPrototypeOf,Qr=Object.prototype.hasOwnProperty,$o=Object.prototype.propertyIsEnumerable;var Qo=(n,t,e)=>t in n?Ut(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Ge=(n,t)=>{for(var e in t||(t={}))Qr.call(t,e)&&Qo(n,e,t[e]);if(mr)for(var e of mr(t))$o.call(t,e)&&Qo(n,e,t[e]);return n},Xr=(n,t)=>yn(n,gn(t)),o=(n,t)=>Ut(n,"name",{value:t,configurable:!0});var Zo=(n,t)=>{var e={};for(var r in n)Qr.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(n!=null&&mr)for(var r of mr(n))t.indexOf(r)<0&&$o.call(n,r)&&(e[r]=n[r]);return e};var Sn=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var vn=(n,t,e,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of hn(t))!Qr.call(n,s)&&s!==e&&Ut(n,s,{get:()=>t[s],enumerable:!(r=Xo(t,s))||r.enumerable});return n};var xn=(n,t,e)=>(e=n!=null?fn(Rn(n)):{},vn(t||!n||!n.__esModule?Ut(e,"default",{value:n,enumerable:!0}):e,n));var m=(n,t,e,r)=>{for(var s=r>1?void 0:r?Xo(t,e):t,a=n.length-1,l;a>=0;a--)(l=n[a])&&(s=(r?l(t,e,s):l(s))||s);return r&&s&&Ut(t,e,s),s};var E=(n,t,e)=>new Promise((r,s)=>{var a=D=>{try{f(e.next(D))}catch(B){s(B)}},l=D=>{try{f(e.throw(D))}catch(B){s(B)}},f=D=>D.done?r(D.value):Promise.resolve(D.value).then(a,l);f((e=e.apply(n,t)).next())});var oi=Sn(($r,Zr)=>{(function(n,t){typeof $r=="object"&&typeof Zr!="undefined"?Zr.exports=t():typeof define=="function"&&define.amd?define(t):(n=typeof globalThis!="undefined"?globalThis:n||self,n.DOMPurify=t())})($r,function(){"use strict";let{entries:n,setPrototypeOf:t,isFrozen:e,getPrototypeOf:r,getOwnPropertyDescriptor:s}=Object,{freeze:a,seal:l,create:f}=Object,{apply:D,construct:B}=typeof Reflect!="undefined"&&Reflect;a||(a=o(function(d){return d},"freeze")),l||(l=o(function(d){return d},"seal")),D||(D=o(function(d,S,h){return d.apply(S,h)},"apply")),B||(B=o(function(d,S){return new d(...S)},"construct"));let A=G(Array.prototype.forEach),w=G(Array.prototype.pop),F=G(Array.prototype.push),Ue=G(String.prototype.toLowerCase),wr=G(String.prototype.toString),po=G(String.prototype.match),wt=G(String.prototype.replace),wi=G(String.prototype.indexOf),Li=G(String.prototype.trim),X=G(Object.prototype.hasOwnProperty),M=G(RegExp.prototype.test),Lt=Ti(TypeError);function G(R){return function(d){for(var S=arguments.length,h=new Array(S>1?S-1:0),L=1;L<S;L++)h[L-1]=arguments[L];return D(R,d,h)}}o(G,"unapply");function Ti(R){return function(){for(var d=arguments.length,S=new Array(d),h=0;h<d;h++)S[h]=arguments[h];return B(R,S)}}o(Ti,"unconstruct");function y(R,d){let S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ue;t&&t(R,null);let h=d.length;for(;h--;){let L=d[h];if(typeof L=="string"){let de=S(L);de!==L&&(e(d)||(d[h]=de),L=de)}R[L]=!0}return R}o(y,"addToSet");function bi(R){for(let d=0;d<R.length;d++)X(R,d)||(R[d]=null);return R}o(bi,"cleanArray");function qe(R){let d=f(null);for(let[S,h]of n(R))X(R,S)&&(Array.isArray(h)?d[S]=bi(h):h&&typeof h=="object"&&h.constructor===Object?d[S]=qe(h):d[S]=h);return d}o(qe,"clone");function nr(R,d){for(;R!==null;){let h=s(R,d);if(h){if(h.get)return G(h.get);if(typeof h.value=="function")return G(h.value)}R=r(R)}function S(){return null}return o(S,"fallbackValue"),S}o(nr,"lookupGetter");let uo=a(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Lr=a(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Tr=a(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ii=a(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),br=a(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Oi=a(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),mo=a(["#text"]),fo=a(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Ir=a(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),yo=a(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),sr=a(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ai=l(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ki=l(/<%[\w\W]*|[\w\W]*%>/gm),Ui=l(/\${[\w\W]*}/gm),qi=l(/^data-[\-\w.\u00B7-\uFFFF]/),Fi=l(/^aria-[\-\w]+$/),go=l(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Mi=l(/^(?:\w+script|data):/i),Gi=l(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ho=l(/^html$/i),Bi=l(/^[a-z][.\w]*(-[.\w]+)+$/i);var Ro=Object.freeze({__proto__:null,MUSTACHE_EXPR:Ai,ERB_EXPR:ki,TMPLIT_EXPR:Ui,DATA_ATTR:qi,ARIA_ATTR:Fi,IS_ALLOWED_URI:go,IS_SCRIPT_OR_DATA:Mi,ATTR_WHITESPACE:Gi,DOCTYPE_NAME:ho,CUSTOM_ELEMENT:Bi});let Hi=o(function(){return typeof window=="undefined"?null:window},"getGlobal"),Ki=o(function(d,S){if(typeof d!="object"||typeof d.createPolicy!="function")return null;let h=null,L="data-tt-policy-suffix";S&&S.hasAttribute(L)&&(h=S.getAttribute(L));let de="dompurify"+(h?"#"+h:"");try{return d.createPolicy(de,{createHTML(tt){return tt},createScriptURL(tt){return tt}})}catch(tt){return console.warn("TrustedTypes policy "+de+" could not be created."),null}},"_createTrustedTypesPolicy");function So(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Hi(),d=o(u=>So(u),"DOMPurify");if(d.version="3.0.11",d.removed=[],!R||!R.document||R.document.nodeType!==9)return d.isSupported=!1,d;let{document:S}=R,h=S,L=h.currentScript,{DocumentFragment:de,HTMLTemplateElement:tt,Node:Or,Element:vo,NodeFilter:Tt,NamedNodeMap:Wi=R.NamedNodeMap||R.MozNamedAttrMap,HTMLFormElement:zi,DOMParser:ji,trustedTypes:ar}=R,lr=vo.prototype,Yi=nr(lr,"cloneNode"),Qi=nr(lr,"nextSibling"),Xi=nr(lr,"childNodes"),Ar=nr(lr,"parentNode");if(typeof tt=="function"){let u=S.createElement("template");u.content&&u.content.ownerDocument&&(S=u.content.ownerDocument)}let O,bt="",{implementation:kr,createNodeIterator:$i,createDocumentFragment:Zi,getElementsByTagName:Ji}=S,{importNode:_i}=h,ie={};d.isSupported=typeof n=="function"&&typeof Ar=="function"&&kr&&kr.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:Ur,ERB_EXPR:qr,TMPLIT_EXPR:Fr,DATA_ATTR:en,ARIA_ATTR:tn,IS_SCRIPT_OR_DATA:rn,ATTR_WHITESPACE:xo,CUSTOM_ELEMENT:on}=Ro,{IS_ALLOWED_URI:Do}=Ro,C=null,Co=y({},[...uo,...Lr,...Tr,...br,...mo]),P=null,Po=y({},[...fo,...Ir,...yo,...sr]),x=Object.seal(f(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),It=null,Mr=null,No=!0,Gr=!0,Eo=!1,wo=!0,rt=!1,Fe=!1,Br=!1,Hr=!1,ot=!1,cr=!1,pr=!1,Lo=!0,To=!1,nn="user-content-",Kr=!0,Ot=!1,it={},nt=null,bo=y({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Io=null,Oo=y({},["audio","video","img","source","image","track"]),Vr=null,Ao=y({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),dr="http://www.w3.org/1998/Math/MathML",ur="http://www.w3.org/2000/svg",ue="http://www.w3.org/1999/xhtml",st=ue,Wr=!1,zr=null,sn=y({},[dr,ur,ue],wr),At=null,an=["application/xhtml+xml","text/html"],ln="text/html",N=null,at=null,cn=S.createElement("form"),ko=o(function(i){return i instanceof RegExp||i instanceof Function},"isRegexOrFunction"),jr=o(function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(at&&at===i)){if((!i||typeof i!="object")&&(i={}),i=qe(i),At=an.indexOf(i.PARSER_MEDIA_TYPE)===-1?ln:i.PARSER_MEDIA_TYPE,N=At==="application/xhtml+xml"?wr:Ue,C=X(i,"ALLOWED_TAGS")?y({},i.ALLOWED_TAGS,N):Co,P=X(i,"ALLOWED_ATTR")?y({},i.ALLOWED_ATTR,N):Po,zr=X(i,"ALLOWED_NAMESPACES")?y({},i.ALLOWED_NAMESPACES,wr):sn,Vr=X(i,"ADD_URI_SAFE_ATTR")?y(qe(Ao),i.ADD_URI_SAFE_ATTR,N):Ao,Io=X(i,"ADD_DATA_URI_TAGS")?y(qe(Oo),i.ADD_DATA_URI_TAGS,N):Oo,nt=X(i,"FORBID_CONTENTS")?y({},i.FORBID_CONTENTS,N):bo,It=X(i,"FORBID_TAGS")?y({},i.FORBID_TAGS,N):{},Mr=X(i,"FORBID_ATTR")?y({},i.FORBID_ATTR,N):{},it=X(i,"USE_PROFILES")?i.USE_PROFILES:!1,No=i.ALLOW_ARIA_ATTR!==!1,Gr=i.ALLOW_DATA_ATTR!==!1,Eo=i.ALLOW_UNKNOWN_PROTOCOLS||!1,wo=i.ALLOW_SELF_CLOSE_IN_ATTR!==!1,rt=i.SAFE_FOR_TEMPLATES||!1,Fe=i.WHOLE_DOCUMENT||!1,ot=i.RETURN_DOM||!1,cr=i.RETURN_DOM_FRAGMENT||!1,pr=i.RETURN_TRUSTED_TYPE||!1,Hr=i.FORCE_BODY||!1,Lo=i.SANITIZE_DOM!==!1,To=i.SANITIZE_NAMED_PROPS||!1,Kr=i.KEEP_CONTENT!==!1,Ot=i.IN_PLACE||!1,Do=i.ALLOWED_URI_REGEXP||go,st=i.NAMESPACE||ue,x=i.CUSTOM_ELEMENT_HANDLING||{},i.CUSTOM_ELEMENT_HANDLING&&ko(i.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(x.tagNameCheck=i.CUSTOM_ELEMENT_HANDLING.tagNameCheck),i.CUSTOM_ELEMENT_HANDLING&&ko(i.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(x.attributeNameCheck=i.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),i.CUSTOM_ELEMENT_HANDLING&&typeof i.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(x.allowCustomizedBuiltInElements=i.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),rt&&(Gr=!1),cr&&(ot=!0),it&&(C=y({},mo),P=[],it.html===!0&&(y(C,uo),y(P,fo)),it.svg===!0&&(y(C,Lr),y(P,Ir),y(P,sr)),it.svgFilters===!0&&(y(C,Tr),y(P,Ir),y(P,sr)),it.mathMl===!0&&(y(C,br),y(P,yo),y(P,sr))),i.ADD_TAGS&&(C===Co&&(C=qe(C)),y(C,i.ADD_TAGS,N)),i.ADD_ATTR&&(P===Po&&(P=qe(P)),y(P,i.ADD_ATTR,N)),i.ADD_URI_SAFE_ATTR&&y(Vr,i.ADD_URI_SAFE_ATTR,N),i.FORBID_CONTENTS&&(nt===bo&&(nt=qe(nt)),y(nt,i.FORBID_CONTENTS,N)),Kr&&(C["#text"]=!0),Fe&&y(C,["html","head","body"]),C.table&&(y(C,["tbody"]),delete It.tbody),i.TRUSTED_TYPES_POLICY){if(typeof i.TRUSTED_TYPES_POLICY.createHTML!="function")throw Lt('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof i.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Lt('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');O=i.TRUSTED_TYPES_POLICY,bt=O.createHTML("")}else O===void 0&&(O=Ki(ar,L)),O!==null&&typeof bt=="string"&&(bt=O.createHTML(""));a&&a(i),at=i}},"_parseConfig"),Uo=y({},["mi","mo","mn","ms","mtext"]),qo=y({},["foreignobject","desc","title","annotation-xml"]),pn=y({},["title","style","font","a","script"]),Fo=y({},[...Lr,...Tr,...Ii]),Mo=y({},[...br,...Oi]),dn=o(function(i){let c=Ar(i);(!c||!c.tagName)&&(c={namespaceURI:st,tagName:"template"});let p=Ue(i.tagName),v=Ue(c.tagName);return zr[i.namespaceURI]?i.namespaceURI===ur?c.namespaceURI===ue?p==="svg":c.namespaceURI===dr?p==="svg"&&(v==="annotation-xml"||Uo[v]):!!Fo[p]:i.namespaceURI===dr?c.namespaceURI===ue?p==="math":c.namespaceURI===ur?p==="math"&&qo[v]:!!Mo[p]:i.namespaceURI===ue?c.namespaceURI===ur&&!qo[v]||c.namespaceURI===dr&&!Uo[v]?!1:!Mo[p]&&(pn[p]||!Fo[p]):!!(At==="application/xhtml+xml"&&zr[i.namespaceURI]):!1},"_checkValidNamespace"),Re=o(function(i){F(d.removed,{element:i});try{i.parentNode.removeChild(i)}catch(c){i.remove()}},"_forceRemove"),Yr=o(function(i,c){try{F(d.removed,{attribute:c.getAttributeNode(i),from:c})}catch(p){F(d.removed,{attribute:null,from:c})}if(c.removeAttribute(i),i==="is"&&!P[i])if(ot||cr)try{Re(c)}catch(p){}else try{c.setAttribute(i,"")}catch(p){}},"_removeAttribute"),Go=o(function(i){let c=null,p=null;if(Hr)i="<remove></remove>"+i;else{let b=po(i,/^[\r\n\t ]+/);p=b&&b[0]}At==="application/xhtml+xml"&&st===ue&&(i='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+i+"</body></html>");let v=O?O.createHTML(i):i;if(st===ue)try{c=new ji().parseFromString(v,At)}catch(b){}if(!c||!c.documentElement){c=kr.createDocument(st,"template",null);try{c.documentElement.innerHTML=Wr?bt:v}catch(b){}}let T=c.body||c.documentElement;return i&&p&&T.insertBefore(S.createTextNode(p),T.childNodes[0]||null),st===ue?Ji.call(c,Fe?"html":"body")[0]:Fe?c.documentElement:T},"_initDocument"),Bo=o(function(i){return $i.call(i.ownerDocument||i,i,Tt.SHOW_ELEMENT|Tt.SHOW_COMMENT|Tt.SHOW_TEXT|Tt.SHOW_PROCESSING_INSTRUCTION|Tt.SHOW_CDATA_SECTION,null)},"_createNodeIterator"),un=o(function(i){return i instanceof zi&&(typeof i.nodeName!="string"||typeof i.textContent!="string"||typeof i.removeChild!="function"||!(i.attributes instanceof Wi)||typeof i.removeAttribute!="function"||typeof i.setAttribute!="function"||typeof i.namespaceURI!="string"||typeof i.insertBefore!="function"||typeof i.hasChildNodes!="function")},"_isClobbered"),Ho=o(function(i){return typeof Or=="function"&&i instanceof Or},"_isNode"),me=o(function(i,c,p){ie[i]&&A(ie[i],v=>{v.call(d,c,p,at)})},"_executeHook"),Ko=o(function(i){let c=null;if(me("beforeSanitizeElements",i,null),un(i))return Re(i),!0;let p=N(i.nodeName);if(me("uponSanitizeElement",i,{tagName:p,allowedTags:C}),i.hasChildNodes()&&!Ho(i.firstElementChild)&&M(/<[/\w]/g,i.innerHTML)&&M(/<[/\w]/g,i.textContent)||i.nodeType===7)return Re(i),!0;if(!C[p]||It[p]){if(!It[p]&&Wo(p)&&(x.tagNameCheck instanceof RegExp&&M(x.tagNameCheck,p)||x.tagNameCheck instanceof Function&&x.tagNameCheck(p)))return!1;if(Kr&&!nt[p]){let v=Ar(i)||i.parentNode,T=Xi(i)||i.childNodes;if(T&&v){let b=T.length;for(let k=b-1;k>=0;--k)v.insertBefore(Yi(T[k],!0),Qi(i))}}return Re(i),!0}return i instanceof vo&&!dn(i)||(p==="noscript"||p==="noembed"||p==="noframes")&&M(/<\/no(script|embed|frames)/i,i.innerHTML)?(Re(i),!0):(rt&&i.nodeType===3&&(c=i.textContent,A([Ur,qr,Fr],v=>{c=wt(c,v," ")}),i.textContent!==c&&(F(d.removed,{element:i.cloneNode()}),i.textContent=c)),me("afterSanitizeElements",i,null),!1)},"_sanitizeElements"),Vo=o(function(i,c,p){if(Lo&&(c==="id"||c==="name")&&(p in S||p in cn))return!1;if(!(Gr&&!Mr[c]&&M(en,c))){if(!(No&&M(tn,c))){if(!P[c]||Mr[c]){if(!(Wo(i)&&(x.tagNameCheck instanceof RegExp&&M(x.tagNameCheck,i)||x.tagNameCheck instanceof Function&&x.tagNameCheck(i))&&(x.attributeNameCheck instanceof RegExp&&M(x.attributeNameCheck,c)||x.attributeNameCheck instanceof Function&&x.attributeNameCheck(c))||c==="is"&&x.allowCustomizedBuiltInElements&&(x.tagNameCheck instanceof RegExp&&M(x.tagNameCheck,p)||x.tagNameCheck instanceof Function&&x.tagNameCheck(p))))return!1}else if(!Vr[c]){if(!M(Do,wt(p,xo,""))){if(!((c==="src"||c==="xlink:href"||c==="href")&&i!=="script"&&wi(p,"data:")===0&&Io[i])){if(!(Eo&&!M(rn,wt(p,xo,"")))){if(p)return!1}}}}}}return!0},"_isValidAttribute"),Wo=o(function(i){return i!=="annotation-xml"&&po(i,on)},"_isBasicCustomElement"),zo=o(function(i){me("beforeSanitizeAttributes",i,null);let{attributes:c}=i;if(!c)return;let p={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:P},v=c.length;for(;v--;){let T=c[v],{name:b,namespaceURI:k,value:Me}=T,kt=N(b),U=b==="value"?Me:Li(Me);if(p.attrName=kt,p.attrValue=U,p.keepAttr=!0,p.forceKeepAttr=void 0,me("uponSanitizeAttribute",i,p),U=p.attrValue,p.forceKeepAttr||(Yr(b,i),!p.keepAttr))continue;if(!wo&&M(/\/>/i,U)){Yr(b,i);continue}rt&&A([Ur,qr,Fr],Yo=>{U=wt(U,Yo," ")});let jo=N(i.nodeName);if(Vo(jo,kt,U)){if(To&&(kt==="id"||kt==="name")&&(Yr(b,i),U=nn+U),O&&typeof ar=="object"&&typeof ar.getAttributeType=="function"&&!k)switch(ar.getAttributeType(jo,kt)){case"TrustedHTML":{U=O.createHTML(U);break}case"TrustedScriptURL":{U=O.createScriptURL(U);break}}try{k?i.setAttributeNS(k,b,U):i.setAttribute(b,U),w(d.removed)}catch(Yo){}}}me("afterSanitizeAttributes",i,null)},"_sanitizeAttributes"),mn=o(function u(i){let c=null,p=Bo(i);for(me("beforeSanitizeShadowDOM",i,null);c=p.nextNode();)me("uponSanitizeShadowNode",c,null),!Ko(c)&&(c.content instanceof de&&u(c.content),zo(c));me("afterSanitizeShadowDOM",i,null)},"_sanitizeShadowDOM");return d.sanitize=function(u){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=null,p=null,v=null,T=null;if(Wr=!u,Wr&&(u="<!-->"),typeof u!="string"&&!Ho(u))if(typeof u.toString=="function"){if(u=u.toString(),typeof u!="string")throw Lt("dirty is not a string, aborting")}else throw Lt("toString is not a function");if(!d.isSupported)return u;if(Br||jr(i),d.removed=[],typeof u=="string"&&(Ot=!1),Ot){if(u.nodeName){let Me=N(u.nodeName);if(!C[Me]||It[Me])throw Lt("root node is forbidden and cannot be sanitized in-place")}}else if(u instanceof Or)c=Go("<!---->"),p=c.ownerDocument.importNode(u,!0),p.nodeType===1&&p.nodeName==="BODY"||p.nodeName==="HTML"?c=p:c.appendChild(p);else{if(!ot&&!rt&&!Fe&&u.indexOf("<")===-1)return O&&pr?O.createHTML(u):u;if(c=Go(u),!c)return ot?null:pr?bt:""}c&&Hr&&Re(c.firstChild);let b=Bo(Ot?u:c);for(;v=b.nextNode();)Ko(v)||(v.content instanceof de&&mn(v.content),zo(v));if(Ot)return u;if(ot){if(cr)for(T=Zi.call(c.ownerDocument);c.firstChild;)T.appendChild(c.firstChild);else T=c;return(P.shadowroot||P.shadowrootmode)&&(T=_i.call(h,T,!0)),T}let k=Fe?c.outerHTML:c.innerHTML;return Fe&&C["!doctype"]&&c.ownerDocument&&c.ownerDocument.doctype&&c.ownerDocument.doctype.name&&M(ho,c.ownerDocument.doctype.name)&&(k="<!DOCTYPE "+c.ownerDocument.doctype.name+`>
`+k),rt&&A([Ur,qr,Fr],Me=>{k=wt(k,Me," ")}),O&&pr?O.createHTML(k):k},d.setConfig=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};jr(u),Br=!0},d.clearConfig=function(){at=null,Br=!1},d.isValidAttribute=function(u,i,c){at||jr({});let p=N(u),v=N(i);return Vo(p,v,c)},d.addHook=function(u,i){typeof i=="function"&&(ie[u]=ie[u]||[],F(ie[u],i))},d.removeHook=function(u){if(ie[u])return w(ie[u])},d.removeHooks=function(u){ie[u]&&(ie[u]=[])},d.removeAllHooks=function(){ie={}},d}o(So,"createDOMPurify");var Vi=So();return Vi})});import{ColumnsBase as Dn,fieldsProxy as Cn}from"@serenity-is/corelib";var qt=class qt extends Dn{};o(qt,"CategoryColumns"),qt.columnsKey="Northwind.Category",qt.Fields=Cn();var fr=qt;import{StringEditor as Pn,PrefixedContext as Nn,initFormType as En}from"@serenity-is/corelib";var Be=class Be extends Nn{constructor(t){if(super(t),!Be.init){Be.init=!0;var e=Pn;En(Be,["CategoryName",e,"Description",e])}}};o(Be,"CategoryForm"),Be.formKey="Northwind.Category";var Ft=Be;import{fieldsProxy as wn}from"@serenity-is/corelib";var $=class ${};o($,"CategoryLangRow"),$.idProperty="Id",$.nameProperty="CategoryName",$.localTextPrefix="Northwind.CategoryLang",$.deletePermission="Northwind:General",$.insertPermission="Northwind:General",$.readPermission="Northwind:General",$.updatePermission="Northwind:General",$.Fields=wn();var Jo=$;import{serviceRequest as Ln}from"@serenity-is/corelib";var _o;(e=>(e.baseUrl="Serenity.Demo.Northwind/CategoryLang",e.Methods={Create:"Serenity.Demo.Northwind/CategoryLang/Create",Update:"Serenity.Demo.Northwind/CategoryLang/Update",Delete:"Serenity.Demo.Northwind/CategoryLang/Delete",Retrieve:"Serenity.Demo.Northwind/CategoryLang/Retrieve",List:"Serenity.Demo.Northwind/CategoryLang/List"},["Create","Update","Delete","Retrieve","List"].forEach(r=>{e[r]=function(s,a,l){return Ln(e.baseUrl+"/"+r,s,a,l)}})))(_o||(_o={}));import{getLookup as Tn,getLookupAsync as bn,fieldsProxy as In}from"@serenity-is/corelib";var H=class H{static getLookup(){return Tn("Northwind.Category")}static getLookupAsync(){return E(this,null,function*(){return bn("Northwind.Category")})}};o(H,"CategoryRow"),H.idProperty="CategoryID",H.nameProperty="CategoryName",H.localTextPrefix="Northwind.Category",H.lookupKey="Northwind.Category",H.deletePermission="Northwind:General",H.insertPermission="Northwind:General",H.readPermission="Northwind:General",H.updatePermission="Northwind:General",H.Fields=In();var Se=H;import{serviceRequest as On}from"@serenity-is/corelib";var lt;(e=>(e.baseUrl="Serenity.Demo.Northwind/Category",e.Methods={Create:"Serenity.Demo.Northwind/Category/Create",Update:"Serenity.Demo.Northwind/Category/Update",Delete:"Serenity.Demo.Northwind/Category/Delete",Retrieve:"Serenity.Demo.Northwind/Category/Retrieve",List:"Serenity.Demo.Northwind/Category/List"},["Create","Update","Delete","Retrieve","List"].forEach(r=>{e[r]=function(s,a,l){return On(e.baseUrl+"/"+r,s,a,l)}})))(lt||(lt={}));import{ColumnsBase as Un,fieldsProxy as qn}from"@serenity-is/corelib";import{Decorators as An,faIcon as kn}from"@serenity-is/corelib";var Mt,Gt,He=class{format(t){let e=t.value;if(!e||!e.length)return"";let r=Mt==null?void 0:Mt.itemById;return r?e.map(s=>{var a=r[s];return t.escape(a==null?s:a.FullName)}).join(", "):(Gt!=null||(Gt=yr.getLookupAsync().then(s=>{var a;Mt=s;try{(a=t.grid)==null||a.invalidate()}finally{Mt=null,Gt=null}}).catch(()=>Gt=null)),`<i class="${kn("spinner")}"></i>`)}};o(He,"EmployeeListFormatter"),He=m([An.registerFormatter("Serenity.Demo.Northwind.EmployeeListFormatter")],He);var Bt=class Bt extends Un{};o(Bt,"CustomerColumns"),Bt.columnsKey="Northwind.Customer",Bt.Fields=qn();var gr=Bt;import{fieldsProxy as Fn}from"@serenity-is/corelib";var Z=class Z{};o(Z,"CustomerCustomerDemoRow"),Z.idProperty="ID",Z.nameProperty="CustomerID",Z.localTextPrefix="Northwind.CustomerCustomerDemo",Z.deletePermission="Northwind:General",Z.insertPermission="Northwind:General",Z.readPermission="Northwind:General",Z.updatePermission="Northwind:General",Z.Fields=Fn();var ei=Z;import{fieldsProxy as Mn}from"@serenity-is/corelib";var J=class J{};o(J,"CustomerDemographicRow"),J.idProperty="ID",J.nameProperty="CustomerTypeID",J.localTextPrefix="Northwind.CustomerDemographic",J.deletePermission="Northwind:General",J.insertPermission="Northwind:General",J.readPermission="Northwind:General",J.updatePermission="Northwind:General",J.Fields=Mn();var ti=J;import{fieldsProxy as Gn}from"@serenity-is/corelib";var _=class _{};o(_,"CustomerDetailsRow"),_.idProperty="Id",_.nameProperty="Email",_.localTextPrefix="Northwind.CustomerDetails",_.deletePermission="Northwind:General",_.insertPermission="Northwind:General",_.readPermission="Northwind:General",_.updatePermission="Northwind:General",_.Fields=Gn();var ri=_;import{StringEditor as us,LookupEditor as ms,DateEditor as fs,EmailAddressEditor as ys,BooleanEditor as gs,PrefixedContext as hs,initFormType as Rs}from"@serenity-is/corelib";var li=xn(oi(),1);import{Authorization as os,Decorators as ai,EditorWidget as is,IGetEditValue as ns,ISetEditValue as ss,Toolbar as as,confirmDialog as ls,formatDate as cs,formatISODateTimeUTC as ps,insert as ds}from"@serenity-is/corelib";import{Decorators as Jn,BaseDialog as _n,HtmlNoteContentEditor as es,cancelDialogButton as ts,okDialogButton as rs}from"@serenity-is/corelib";var ro=Object.keys;function Bn(n){return typeof n=="boolean"}o(Bn,"isBoolean");function Hn(n){return n&&typeof n.nodeType=="number"}o(Hn,"isElement");function oo(n){return typeof n=="string"}o(oo,"isString");function Kn(n){return typeof n=="number"}o(Kn,"isNumber");function Ke(n){return typeof n=="object"?n!==null:Ht(n)}o(Ke,"isObject");function Ht(n){return typeof n=="function"}o(Ht,"isFunction");function Vn(n){let{prototype:t}=n;return!!(t&&t.isReactComponent)}o(Vn,"isComponentClass");function Wn(n){return Ke(n)&&typeof n.length=="number"&&typeof n.nodeType!="number"}o(Wn,"isArrayLike");function _r(n,t){if(n)for(let e of ro(n))t(n[e],e)}o(_r,"forEach");function zn(n){return Ke(n)&&"current"in n}o(zn,"isRef");var jn=Symbol.for("jsx-dom:type"),ii=function(n){return n.ShadowRoot="ShadowRoot",n}(ii||{});function Yn(n){return n!=null&&n[jn]===ii.ShadowRoot}o(Yn,"isShadowRoot");function ni(n){return!Bn(n)&&n!=null}o(ni,"isVisibleChild");function eo(n){return Array.isArray(n)?n.map(eo).filter(Boolean).join(" "):Ke(n)?Symbol.iterator in n?eo(Array.from(n)):ro(n).filter(t=>n[t]).join(" "):ni(n)?""+n:""}o(eo,"className");function io(n){let t=document.createDocumentFragment();return Rr(n.children,t),t}o(io,"Fragment");var so=class so{constructor(t){this.props=t}render(){return null}};o(so,"Component");var to=so;to.prototype;function Qn(n,t,e){t=Xr(Ge({},t),{children:e});let r=new n(t),s=r.render();return"ref"in t&&no(t.ref,r),s}o(Qn,"initComponentClass");function g(n,t){let a=t,{children:e}=a,r=Zo(a,["children"]),s;if(oo(n)){if(s=r.namespaceURI?document.createElementNS(r.namespaceURI,n):document.createElement(n),Zn(r,s),Rr(e,s),s instanceof window.HTMLSelectElement&&r.value!=null)if(r.multiple===!0&&Array.isArray(r.value)){let l=r.value.map(f=>String(f));s.querySelectorAll("option").forEach(f=>f.selected=l.includes(f.value))}else s.value=r.value;no(r.ref,s)}else if(Ht(n))Ke(n.defaultProps)&&(r=Ge(Ge({},n.defaultProps),r)),s=Vn(n)?Qn(n,r,e):n(Xr(Ge({},r),{children:e}));else throw new TypeError(`Invalid JSX element type: ${n}`);return s}o(g,"jsx");function no(n,t){zn(n)?n.current=t:Ht(n)&&n(t)}o(no,"attachRef");function Rr(n,t){if(Wn(n))Xn(n,t);else if(oo(n)||Kn(n))Jr(document.createTextNode(n),t);else if(n===null)Jr(document.createComment(""),t);else if(Hn(n))Jr(n,t);else if(Yn(n)){let e=t.attachShadow(n.attr);Rr(n.children,e),no(n.ref,e)}}o(Rr,"appendChild");function Xn(n,t){for(let e of[...n])Rr(e,t);return t}o(Xn,"appendChildren");function Jr(n,t){t instanceof window.HTMLTemplateElement?t.content.appendChild(n):t.appendChild(n)}o(Jr,"appendChildToNode");function si(n,t){t==null||t===!1||(Array.isArray(t)?t.forEach(e=>si(n,e)):oo(t)?n.setAttribute("style",t):Ke(t)&&_r(t,(e,r)=>{r.indexOf("-")===0?n.style.setProperty(r,e):n.style[r]=e}))}o(si,"style");function $n(n,t,e){switch(n){case"htmlFor":hr(e,"for",t);return;case"dataset":_r(t,(r,s)=>{r!=null&&(e.dataset[s]=r)});return;case"innerHTML":case"innerText":case"textContent":ni(t)&&(e[n]=t);return;case"dangerouslySetInnerHTML":Ke(t)&&(e.innerHTML=t.__html);return;case"value":if(t==null||e instanceof window.HTMLSelectElement)return;if(e instanceof window.HTMLTextAreaElement){e.value=t;return}break;case"spellCheck":e.spellcheck=t;return;case"class":case"className":Ht(t)?t(e):hr(e,"class",eo(t));return;case"ref":case"namespaceURI":return;case"style":si(e,t);return;case"on":case"onCapture":_r(t,(r,s)=>{e.addEventListener(s,r,n==="onCapture")});return}if(Ht(t)){if(n[0]==="o"&&n[1]==="n"){let r=n.toLowerCase(),s=r.endsWith("capture");if(r==="ondoubleclick"?r="ondblclick":s&&r==="ondoubleclickcapture"&&(r="ondblclickcapture"),!s&&e[r]===null)e[r]=t;else if(s)e.addEventListener(r.substring(2,r.length-7),t,!0);else{let a;r in window?a=r.substring(2):a=r[2]+n.slice(3),e.addEventListener(a,t)}}}else Ke(t)?e[n]=t:t===!0?hr(e,n,""):t!==!1&&t!=null&&hr(e,n,t)}o($n,"attribute");function hr(n,t,e){n.setAttribute(t,e)}o(hr,"attr");function Zn(n,t){for(let e of ro(n))$n(e,n[e],t);return t}o(Zn,"attributes");var fe=class extends _n{renderContents(){let e=this.useIdPrefix();return g("form",{id:e.Form,class:"s-Form",children:g("textarea",{id:e.Text,class:"required",ref:r=>queueMicrotask(()=>this.textEditor=new es({element:r}))})})}getDialogButtons(){return[rs({click:e=>{if(!this.validateForm()){e.preventDefault();return}this.okClick&&this.okClick()}}),ts()]}get text(){return this.textEditor.value}set text(e){this.textEditor.value=e}};o(fe,"NoteDialog"),fe=m([Jn.registerClass("Serenity.Demo.Northwind.NoteDialog")],fe);var ve=class extends is{renderContents(){let e=this.useIdPrefix();return g("div",{children:[g(as,{id:e.Toolbar,buttons:[{title:"Add Note",cssClass:"add-button",onClick:r=>{r.preventDefault(),this.addClick()}}]}),g("ul",{id:e.NoteList,ref:r=>this.noteList=r})]})}updateContent(){this.noteList.innerHTML="",this.noteList.append(g(io,{children:(this.items||[]).map((e,r)=>{var s;return g("li",{children:[g("div",{class:"note-text",dangerouslySetInnerHTML:{__html:li.sanitize((s=e.Text)!=null?s:"")}}),g("a",{href:"#",class:"note-date","data-index":r,onClick:this.editClick.bind(this),children:e.InsertUserDisplayName+" - "+cs(e.InsertDate,"g")}),g("a",{href:"#",class:"note-delete","data-index":r,title:"delete note",onClick:this.deleteClick.bind(this)})]})})}))}addClick(){var e=new fe({});e.dialogTitle="Add Note",e.okClick=()=>{var s;var r=(s=e.text)==null?void 0:s.trim();r&&(this.items=this.items||[],ds(this.items,0,{Text:r,InsertUserDisplayName:os.userDefinition.DisplayName,InsertDate:ps(new Date)}),this.updateContent(),e.dialogClose("ok"),this.set_isDirty(!0),this.onChange&&this.onChange())},e.dialogOpen()}editClick(e){e.preventDefault();var r=e.target.dataset.index,s=this.items[r],a=new fe({});a.dialogTitle="Edit Note",a.text=s.Text,a.okClick=()=>{var f;var l=(f=a.text)==null?void 0:f.trim();l&&(this.items[r].Text=l,this.updateContent(),a.dialogClose("ok"),this.set_isDirty(!0),this.onChange&&this.onChange())},a.dialogOpen()}deleteClick(e){e.preventDefault();var r=e.target.dataset.index;ls("Delete this note?",()=>{this.items.splice(r,1),this.updateContent(),this.set_isDirty(!0),this.onChange&&this.onChange()})}get value(){return this.items}set value(e){this.items=e||[],this.set_isDirty(!1),this.updateContent()}getEditValue(e,r){r[e.name]=this.value}setEditValue(e,r){this.value=e[r.name]||[]}get_isDirty(){return this.isDirty}set_isDirty(e){this.isDirty=e}};o(ve,"NotesEditor"),ve=m([ai.registerEditor("Serenity.Demo.Northwind.NotesEditor",[ns,ss]),ai.element("<div/>")],ve);var Ve=class Ve extends hs{constructor(t){if(super(t),!Ve.init){Ve.init=!0;var e=us,r=ms,s=ve,a=fs,l=ys,f=gs;Rs(Ve,["CustomerID",e,"CompanyName",e,"ContactName",e,"ContactTitle",e,"Representatives",r,"Address",e,"Country",r,"City",r,"Region",e,"PostalCode",e,"Phone",e,"Fax",e,"NoteList",s,"LastContactDate",a,"LastContactedBy",r,"Email",l,"SendBulletin",f])}}};o(Ve,"CustomerForm"),Ve.formKey="Northwind.Customer";var Kt=Ve;import{fieldsProxy as Ss}from"@serenity-is/corelib";var ne=class ne{};o(ne,"CustomerGrossSalesRow"),ne.nameProperty="ContactName",ne.localTextPrefix="Northwind.CustomerGrossSales",ne.deletePermission="Northwind:General",ne.insertPermission="Northwind:General",ne.readPermission="Northwind:General",ne.updatePermission="Northwind:General",ne.Fields=Ss();var ci=ne;import{fieldsProxy as vs}from"@serenity-is/corelib";var se=class se{};o(se,"CustomerRepresentativesRow"),se.idProperty="RepresentativeId",se.localTextPrefix="Northwind.CustomerRepresentatives",se.deletePermission="Northwind:Customer:View",se.insertPermission="Northwind:Customer:View",se.readPermission="Northwind:Customer:View",se.updatePermission="Northwind:Customer:View",se.Fields=vs();var pi=se;import{getLookup as xs,getLookupAsync as Ds,fieldsProxy as Cs}from"@serenity-is/corelib";var K=class K{static getLookup(){return xs("Northwind.Customer")}static getLookupAsync(){return E(this,null,function*(){return Ds("Northwind.Customer")})}};o(K,"CustomerRow"),K.idProperty="ID",K.nameProperty="CompanyName",K.localTextPrefix="Northwind.Customer",K.lookupKey="Northwind.Customer",K.deletePermission="Northwind:Customer:Delete",K.insertPermission="Northwind:Customer:Modify",K.readPermission="Northwind:Customer:View",K.updatePermission="Northwind:Customer:Modify",K.Fields=Cs();var ct=K;import{serviceRequest as Ps}from"@serenity-is/corelib";var pt;(e=>(e.baseUrl="Serenity.Demo.Northwind/Customer",e.Methods={Create:"Serenity.Demo.Northwind/Customer/Create",Update:"Serenity.Demo.Northwind/Customer/Update",Delete:"Serenity.Demo.Northwind/Customer/Delete",GetNextNumber:"Serenity.Demo.Northwind/Customer/GetNextNumber",Retrieve:"Serenity.Demo.Northwind/Customer/Retrieve",List:"Serenity.Demo.Northwind/Customer/List"},["Create","Update","Delete","GetNextNumber","Retrieve","List"].forEach(r=>{e[r]=function(s,a,l){return Ps(e.baseUrl+"/"+r,s,a,l)}})))(pt||(pt={}));import{getLookup as Ns,getLookupAsync as Es,fieldsProxy as ws}from"@serenity-is/corelib";var V=class V{static getLookup(){return Ns("Northwind.Employee")}static getLookupAsync(){return E(this,null,function*(){return Es("Northwind.Employee")})}};o(V,"EmployeeRow"),V.idProperty="EmployeeID",V.nameProperty="FullName",V.localTextPrefix="Northwind.Employee",V.lookupKey="Northwind.Employee",V.deletePermission="Northwind:General",V.insertPermission="Northwind:General",V.readPermission="Northwind:General",V.updatePermission="Northwind:General",V.Fields=ws();var yr=V;import{fieldsProxy as Ls}from"@serenity-is/corelib";var ee=class ee{};o(ee,"EmployeeTerritoryRow"),ee.idProperty="EmployeeID",ee.nameProperty="TerritoryID",ee.localTextPrefix="Northwind.EmployeeTerritory",ee.deletePermission="Northwind:General",ee.insertPermission="Northwind:General",ee.readPermission="Northwind:General",ee.updatePermission="Northwind:General",ee.Fields=Ls();var di=ee;import{Decorators as Ts}from"@serenity-is/corelib";var ao=(e=>(e[e.Male=1]="Male",e[e.Female=2]="Female",e))(ao||{});Ts.registerEnumType(ao,"Serenity.Demo.Northwind.Gender");import{fieldsProxy as bs}from"@serenity-is/corelib";var te=class te{};o(te,"NoteRow"),te.idProperty="NoteId",te.nameProperty="EntityType",te.localTextPrefix="Northwind.Note",te.deletePermission="Northwind:General",te.insertPermission="Northwind:General",te.readPermission="Northwind:General",te.updatePermission="Northwind:General",te.Fields=bs();var ui=te;import{ColumnsBase as Ks,fieldsProxy as Vs}from"@serenity-is/corelib";import{Decorators as Is,IInitializeColumn as Os,faIcon as As}from"@serenity-is/corelib";import{htmlEncode as ks,isTrimmedEmpty as Us}from"@serenity-is/corelib";var We=class{constructor(t={}){this.props=t;var e;(e=this.props)!=null||(this.props={})}format(t){let e=ks(t.value);if(!this.props.genderProperty||Us(t.value))return e;let r=t.item[this.props.genderProperty]===2;return`<i class="${As(r?"female":"male",r?"danger":"primary")} + ' text-opacity-75"></i>`+e}initializeColumn(t){t.referencedFields=t.referencedFields||[],this.props.genderProperty&&t.referencedFields.push(this.props.genderProperty)}};o(We,"EmployeeFormatter"),We=m([Is.registerFormatter("Serenity.Demo.Northwind.EmployeeFormatter",[Os])],We);import{Decorators as qs,faIcon as Fs,htmlEncode as Ms}from"@serenity-is/corelib";var ze=class{format(t){return t.value==null?"":`${Ms(t.value)} <i class="${Fs("balance-scale","secondary")} text-opacity-75"></i>`}};o(ze,"FreightFormatter"),ze=m([qs.registerFormatter("Serenity.Demo.Northwind.FreightFormatter")],ze);import{Decorators as Gs,faIcon as Bs}from"@serenity-is/corelib";var je=class{format(t){return t.value?`<i class="text-info ${Bs(t.value=="Speedy Express"?"plane":t.value=="Federal Shipping"?"ship":"truck")}  text-opacity-75"></i> ${t.escape()}`:t.escape()}};o(je,"ShipperFormatter"),je=m([Gs.registerFormatter("Serenity.Demo.Northwind.ShipperFormatter")],je);import{Decorators as Hs}from"@serenity-is/corelib";var lo=(e=>(e[e.NotShipped=0]="NotShipped",e[e.Shipped=1]="Shipped",e))(lo||{});Hs.registerEnumType(lo,"Serenity.Demo.Northwind.OrderShippingState","Northwind.OrderShippingState");var Vt=class Vt extends Ks{};o(Vt,"OrderColumns"),Vt.columnsKey="Northwind.Order",Vt.Fields=Vs();var Sr=Vt;import{ColumnsBase as Ws,fieldsProxy as zs}from"@serenity-is/corelib";var Wt=class Wt extends Ws{};o(Wt,"OrderDetailColumns"),Wt.columnsKey="Northwind.OrderDetail",Wt.Fields=zs();var vr=Wt;import{LookupEditor as js,DecimalEditor as Ys,IntegerEditor as Qs,PrefixedContext as Xs,initFormType as $s}from"@serenity-is/corelib";var Ye=class Ye extends Xs{constructor(t){if(super(t),!Ye.init){Ye.init=!0;var e=js,r=Ys,s=Qs;$s(Ye,["ProductID",e,"UnitPrice",r,"Quantity",s,"Discount",r])}}};o(Ye,"OrderDetailForm"),Ye.formKey="Northwind.OrderDetail";var zt=Ye;import{fieldsProxy as Zs}from"@serenity-is/corelib";var ae=class ae{};o(ae,"OrderDetailRow"),ae.idProperty="DetailID",ae.localTextPrefix="Northwind.OrderDetail",ae.deletePermission="Northwind:General",ae.insertPermission="Northwind:General",ae.readPermission="Northwind:General",ae.updatePermission="Northwind:General",ae.Fields=Zs();var dt=ae;import{serviceRequest as Js}from"@serenity-is/corelib";var mi;(e=>(e.baseUrl="Serenity.Demo.Northwind/OrderDetail",e.Methods={Retrieve:"Serenity.Demo.Northwind/OrderDetail/Retrieve",List:"Serenity.Demo.Northwind/OrderDetail/List"},["Retrieve","List"].forEach(r=>{e[r]=function(s,a,l){return Js(e.baseUrl+"/"+r,s,a,l)}})))(mi||(mi={}));import{DateEditor as la,LookupEditor as ca,DecimalEditor as pa,StringEditor as da,PrefixedContext as ua,initFormType as ma}from"@serenity-is/corelib";import{Decorators as _s,LookupEditorBase as ea}from"@serenity-is/corelib";var xe=class extends ea{constructor(t){super(Ge({async:!0},t))}getLookupKey(){return"Northwind.Customer"}getItemText(t,e){return super.getItemText(t,e)+" ["+t.CustomerID+"]"}};o(xe,"CustomerEditor"),xe=m([_s.registerEditor("Serenity.Demo.Northwind.CustomerEditor")],xe);import{Decorators as ia,alertDialog as na,toId as sa}from"@serenity-is/corelib";import{GridEditorBase as aa}from"@serenity-is/extensions";import{Decorators as ta}from"@serenity-is/corelib";import{toId as ra}from"@serenity-is/corelib";import{GridEditorDialog as oa}from"@serenity-is/extensions";var De=class extends oa{constructor(e){super(e);this.form=new zt(this.idPrefix),this.form.ProductID.changeSelect2(r=>E(this,null,function*(){var s=ra(this.form.ProductID.value);s!=null&&(this.form.UnitPrice.value=(yield q.getLookupAsync()).itemById[s].UnitPrice)})),this.form.Discount.addValidationRule(this.uniqueName,r=>{var s=this.form.UnitPrice.value,a=this.form.Quantity.value,l=this.form.Discount.value;if(s!=null&&a!=null&&l!=null&&l>0&&l>=s*a)return"Discount can't be higher than total price!"})}getFormKey(){return zt.formKey}getLocalTextPrefix(){return dt.localTextPrefix}};o(De,"OrderDetailDialog"),De=m([ta.registerClass()],De);var Ce=class extends aa{getColumnsKey(){return vr.columnsKey}getDialogType(){return De}getLocalTextPrefix(){return dt.localTextPrefix}validateEntity(t,e){t.ProductID=sa(t.ProductID);var r=this.view.getItems().find(s=>s.ProductID===t.ProductID);return r&&this.id(r)!==e?(na("This product is already in order details!"),!1):(e!=null||(e=t[this.getIdProperty()]),q.getLookupAsync().then(s=>{var l,f;var a=(f=(l=this.view)==null?void 0:l.getItemById)==null?void 0:f.call(l,e);a&&(a.ProductName=s.itemById[t.ProductID].ProductName,this.view.updateItem(e,a))}),t.LineTotal=(t.Quantity||0)*(t.UnitPrice||0)-(t.Discount||0),!0)}};o(Ce,"OrderDetailsEditor"),Ce=m([ia.registerEditor("Serenity.Demo.Northwind.OrderDetailsEditor")],Ce);var Qe=class Qe extends ua{constructor(t){if(super(t),!Qe.init){Qe.init=!0;var e=xe,r=la,s=ca,a=Ce,l=pa,f=da;ma(Qe,["CustomerID",e,"OrderDate",r,"RequiredDate",r,"EmployeeID",s,"DetailList",a,"ShippedDate",r,"ShipVia",s,"Freight",l,"ShipName",f,"ShipAddress",f,"ShipCity",f,"ShipRegion",f,"ShipPostalCode",f,"ShipCountry",f])}}};o(Qe,"OrderForm"),Qe.formKey="Northwind.Order";var jt=Qe;import{fieldsProxy as fa}from"@serenity-is/corelib";var re=class re{};o(re,"OrderRow"),re.idProperty="OrderID",re.nameProperty="CustomerID",re.localTextPrefix="Northwind.Order",re.deletePermission="Northwind:General",re.insertPermission="Northwind:General",re.readPermission="Northwind:General",re.updatePermission="Northwind:General",re.Fields=fa();var ye=re;import{serviceRequest as ya}from"@serenity-is/corelib";var Xe;(e=>(e.baseUrl="Serenity.Demo.Northwind/Order",e.Methods={Create:"Serenity.Demo.Northwind/Order/Create",Update:"Serenity.Demo.Northwind/Order/Update",Delete:"Serenity.Demo.Northwind/Order/Delete",Retrieve:"Serenity.Demo.Northwind/Order/Retrieve",List:"Serenity.Demo.Northwind/Order/List"},["Create","Update","Delete","Retrieve","List"].forEach(r=>{e[r]=function(s,a,l){return ya(e.baseUrl+"/"+r,s,a,l)}})))(Xe||(Xe={}));var fi;(e=>{e.General="Northwind:General";let t;(l=>(l.Delete="Northwind:Customer:Delete",l.Modify="Northwind:Customer:Modify",l.View="Northwind:Customer:View"))(t=e.Customer||(e.Customer={}))})(fi||(fi={}));import{ColumnsBase as ga,fieldsProxy as ha}from"@serenity-is/corelib";var Yt=class Yt extends ga{};o(Yt,"ProductColumns"),Yt.columnsKey="Northwind.Product",Yt.Fields=ha();var Qt=Yt;import{StringEditor as va,ImageUploadEditor as xa,BooleanEditor as Da,LookupEditor as Ca,DecimalEditor as Pa,IntegerEditor as Na,PrefixedContext as Ea,initFormType as wa}from"@serenity-is/corelib";import{Decorators as Ra,EntityDialog as Sa}from"@serenity-is/corelib";var ge=class extends Sa{constructor(){super(...arguments);this.form=new Xt(this.idPrefix)}getFormKey(){return Xt.formKey}getRowDefinition(){return Pe}getService(){return ut.baseUrl}};o(ge,"SupplierDialog"),ge=m([Ra.registerClass("Serenity.Demo.Northwind.SupplierDialog")],ge);var $e=class $e extends Ea{constructor(t){if(super(t),!$e.init){$e.init=!0;var e=va,r=xa,s=Da,a=Ca,l=Pa,f=Na;wa($e,["ProductName",e,"ProductImage",r,"Discontinued",s,"SupplierID",a,"CategoryID",a,"QuantityPerUnit",e,"UnitPrice",l,"UnitsInStock",f,"UnitsOnOrder",f,"ReorderLevel",f])}}};o($e,"ProductForm"),$e.formKey="Northwind.Product";var $t=$e;import{fieldsProxy as La}from"@serenity-is/corelib";var oe=class oe{};o(oe,"ProductLangRow"),oe.idProperty="Id",oe.nameProperty="ProductName",oe.localTextPrefix="Northwind.ProductLang",oe.deletePermission="Northwind:General",oe.insertPermission="Northwind:General",oe.readPermission="Northwind:General",oe.updatePermission="Northwind:General",oe.Fields=La();var yi=oe;import{serviceRequest as Ta}from"@serenity-is/corelib";var gi;(e=>(e.baseUrl="Serenity.Demo.Northwind/ProductLang",e.Methods={Create:"Serenity.Demo.Northwind/ProductLang/Create",Update:"Serenity.Demo.Northwind/ProductLang/Update",Delete:"Serenity.Demo.Northwind/ProductLang/Delete",Retrieve:"Serenity.Demo.Northwind/ProductLang/Retrieve",List:"Serenity.Demo.Northwind/ProductLang/List"},["Create","Update","Delete","Retrieve","List"].forEach(r=>{e[r]=function(s,a,l){return Ta(e.baseUrl+"/"+r,s,a,l)}})))(gi||(gi={}));import{fieldsProxy as ba}from"@serenity-is/corelib";var le=class le{};o(le,"ProductLogRow"),le.idProperty="ProductLogID",le.localTextPrefix="Northwind.ProductLog",le.deletePermission=null,le.insertPermission=null,le.readPermission="",le.updatePermission=null,le.Fields=ba();var hi=le;import{getLookup as Ia,getLookupAsync as Oa,fieldsProxy as Aa}from"@serenity-is/corelib";var W=class W{static getLookup(){return Ia("Northwind.Product")}static getLookupAsync(){return E(this,null,function*(){return Oa("Northwind.Product")})}};o(W,"ProductRow"),W.idProperty="ProductID",W.nameProperty="ProductName",W.localTextPrefix="Northwind.Product",W.lookupKey="Northwind.Product",W.deletePermission="Northwind:General",W.insertPermission="Northwind:General",W.readPermission="Northwind:General",W.updatePermission="Northwind:General",W.Fields=Aa();var q=W;import{serviceRequest as ka}from"@serenity-is/corelib";var Ne;(e=>(e.baseUrl="Serenity.Demo.Northwind/Product",e.Methods={Create:"Serenity.Demo.Northwind/Product/Create",Update:"Serenity.Demo.Northwind/Product/Update",Delete:"Serenity.Demo.Northwind/Product/Delete",Retrieve:"Serenity.Demo.Northwind/Product/Retrieve",List:"Serenity.Demo.Northwind/Product/List"},["Create","Update","Delete","Retrieve","List"].forEach(r=>{e[r]=function(s,a,l){return ka(e.baseUrl+"/"+r,s,a,l)}})))(Ne||(Ne={}));import{ColumnsBase as Ua,fieldsProxy as qa}from"@serenity-is/corelib";var Zt=class Zt extends Ua{};o(Zt,"RegionColumns"),Zt.columnsKey="Northwind.Region",Zt.Fields=qa();var xr=Zt;import{IntegerEditor as Fa,StringEditor as Ma,PrefixedContext as Ga,initFormType as Ba}from"@serenity-is/corelib";var Ze=class Ze extends Ga{constructor(t){if(super(t),!Ze.init){Ze.init=!0;var e=Fa,r=Ma;Ba(Ze,["RegionID",e,"RegionDescription",r])}}};o(Ze,"RegionForm"),Ze.formKey="Northwind.Region";var Jt=Ze;import{getLookup as Ha,getLookupAsync as Ka,fieldsProxy as Va}from"@serenity-is/corelib";var z=class z{static getLookup(){return Ha("Northwind.Region")}static getLookupAsync(){return E(this,null,function*(){return Ka("Northwind.Region")})}};o(z,"RegionRow"),z.idProperty="RegionID",z.nameProperty="RegionDescription",z.localTextPrefix="Northwind.Region",z.lookupKey="Northwind.Region",z.deletePermission="Northwind:General",z.insertPermission="Northwind:General",z.readPermission="Northwind:General",z.updatePermission="Northwind:General",z.Fields=Va();var mt=z;import{serviceRequest as Wa}from"@serenity-is/corelib";var ft;(e=>(e.baseUrl="Serenity.Demo.Northwind/Region",e.Methods={Create:"Serenity.Demo.Northwind/Region/Create",Update:"Serenity.Demo.Northwind/Region/Update",Delete:"Serenity.Demo.Northwind/Region/Delete",Retrieve:"Serenity.Demo.Northwind/Region/Retrieve",List:"Serenity.Demo.Northwind/Region/List"},["Create","Update","Delete","Retrieve","List"].forEach(r=>{e[r]=function(s,a,l){return Wa(e.baseUrl+"/"+r,s,a,l)}})))(ft||(ft={}));import{ColumnsBase as za,fieldsProxy as ja}from"@serenity-is/corelib";var _t=class _t extends za{};o(_t,"SalesByCategoryColumns"),_t.columnsKey="Northwind.SalesByCategory",_t.Fields=ja();var Ri=_t;import{fieldsProxy as Ya}from"@serenity-is/corelib";var ce=class ce{};o(ce,"SalesByCategoryRow"),ce.nameProperty="CategoryName",ce.localTextPrefix="Northwind.SalesByCategory",ce.deletePermission="Northwind:General",ce.insertPermission="Northwind:General",ce.readPermission="Northwind:General",ce.updatePermission="Northwind:General",ce.Fields=Ya();var Si=ce;import{serviceRequest as Qa}from"@serenity-is/corelib";var vi;(e=>(e.baseUrl="Serenity.Demo.Northwind/SalesByCategory",e.Methods={List:"Serenity.Demo.Northwind/SalesByCategory/List"},["List"].forEach(r=>{e[r]=function(s,a,l){return Qa(e.baseUrl+"/"+r,s,a,l)}})))(vi||(vi={}));import{ColumnsBase as Xa,fieldsProxy as $a}from"@serenity-is/corelib";var er=class er extends Xa{};o(er,"ShipperColumns"),er.columnsKey="Northwind.Shipper",er.Fields=$a();var Dr=er;import{StringEditor as el,PrefixedContext as tl,initFormType as rl}from"@serenity-is/corelib";import{Decorators as Za,StringEditor as Ja,localText as _a,replaceAll as Ee}from"@serenity-is/corelib";var I=class extends Ja{constructor(t){super(t),this.addValidationRule(this.uniqueName,r=>{var a,l;var s=(a=this.get_value())==null?void 0:a.trim();return s?I.validate(s,(l=this.props)==null?void 0:l.multiple):null});let e=this.domNode;e.addEventListener("change",r=>{this.formatValue()}),e.addEventListener("blur",r=>{this.domNode.classList.contains("valid")&&this.formatValue()})}formatValue(){this.domNode.value=this.getFormattedValue()}getFormattedValue(){var e;var t=this.domNode.value;return(e=this.props)!=null&&e.multiple?I.formatMulti(t,I.formatPhone):I.formatPhone(t)}get_value(){return this.getFormattedValue()}set_value(t){this.domNode.value=t}static validate(t,e){var r=e?I.isValidMulti(t,I.isValidPhone):I.isValidPhone(t);return r?null:_a(e?"Validation.NorthwindPhoneMultiple":"Validation.NorthwindPhone")}static isValidPhone(t){if(!t||(t=Ee(Ee(t," ",""),"-",""),t.length<10)||(t.startsWith("0")&&(t=t.substring(1)),t.startsWith("(")&&t.charAt(4)===")"&&(t=t.substr(1,3)+t.substring(5)),t.length!==10)||t.startsWith("0"))return!1;for(var e=0;e<t.length;e++){var r=t.charAt(e);if(r<"0"||r>"9")return!1}return!0}static formatPhone(t){return I.isValidPhone(t)&&(t=Ee(Ee(Ee(Ee(t," ",""),"-",""),"(",""),")",""),t.startsWith("0")&&(t=t.substring(1)),t="("+t.substr(0,3)+") "+t.substr(3,3)+"-"+t.substr(6,2)+t.substr(8,2)),t}static formatMulti(t,e){var r=Ee(t,String.fromCharCode(59),String.fromCharCode(44)).split(String.fromCharCode(44)),s="";for(var a of r){var l=a==null?void 0:a.trim();l&&(s.length>0&&(s+=", "),s+=e(l))}return s}static isValidMulti(t,e){if(!t)return!1;for(var r=Ee(t,String.fromCharCode(59),String.fromCharCode(44)).split(String.fromCharCode(44)),s=!1,a=0;a<r.length;a++){var l=r[a],f=l==null?void 0:l.trim();if(f){if(!e(f))return!1;s=!0}}return!!s}};o(I,"PhoneEditor"),I=m([Za.registerEditor("Serenity.Demo.Northwind.PhoneEditor")],I);var Je=class Je extends tl{constructor(t){if(super(t),!Je.init){Je.init=!0;var e=el,r=I;rl(Je,["CompanyName",e,"Phone",r])}}};o(Je,"ShipperForm"),Je.formKey="Northwind.Shipper";var tr=Je;import{getLookup as ol,getLookupAsync as il,fieldsProxy as nl}from"@serenity-is/corelib";var j=class j{static getLookup(){return ol("Northwind.Shipper")}static getLookupAsync(){return E(this,null,function*(){return il("Northwind.Shipper")})}};o(j,"ShipperRow"),j.idProperty="ShipperID",j.nameProperty="CompanyName",j.localTextPrefix="Northwind.Shipper",j.lookupKey="Northwind.Shipper",j.deletePermission="Northwind:General",j.insertPermission="Northwind:General",j.readPermission="Northwind:General",j.updatePermission="Northwind:General",j.Fields=nl();var yt=j;import{serviceRequest as sl}from"@serenity-is/corelib";var gt;(e=>(e.baseUrl="Serenity.Demo.Northwind/Shipper",e.Methods={Create:"Serenity.Demo.Northwind/Shipper/Create",Update:"Serenity.Demo.Northwind/Shipper/Update",Delete:"Serenity.Demo.Northwind/Shipper/Delete",Retrieve:"Serenity.Demo.Northwind/Shipper/Retrieve",List:"Serenity.Demo.Northwind/Shipper/List"},["Create","Update","Delete","Retrieve","List"].forEach(r=>{e[r]=function(s,a,l){return sl(e.baseUrl+"/"+r,s,a,l)}})))(gt||(gt={}));import{ColumnsBase as al,fieldsProxy as ll}from"@serenity-is/corelib";var rr=class rr extends al{};o(rr,"SupplierColumns"),rr.columnsKey="Northwind.Supplier",rr.Fields=ll();var Cr=rr;import{StringEditor as cl,PrefixedContext as pl,initFormType as dl}from"@serenity-is/corelib";var _e=class _e extends pl{constructor(t){if(super(t),!_e.init){_e.init=!0;var e=cl;dl(_e,["CompanyName",e,"ContactName",e,"ContactTitle",e,"Address",e,"Region",e,"PostalCode",e,"Country",e,"City",e,"Phone",e,"Fax",e,"HomePage",e])}}};o(_e,"SupplierForm"),_e.formKey="Northwind.Supplier";var Xt=_e;import{getLookup as ul,getLookupAsync as ml,fieldsProxy as fl}from"@serenity-is/corelib";var Y=class Y{static getLookup(){return ul("Northwind.Supplier")}static getLookupAsync(){return E(this,null,function*(){return ml("Northwind.Supplier")})}};o(Y,"SupplierRow"),Y.idProperty="SupplierID",Y.nameProperty="CompanyName",Y.localTextPrefix="Northwind.Supplier",Y.lookupKey="Northwind.Supplier",Y.deletePermission="Northwind:General",Y.insertPermission="Northwind:General",Y.readPermission="Northwind:General",Y.updatePermission="Northwind:General",Y.Fields=fl();var Pe=Y;import{serviceRequest as yl}from"@serenity-is/corelib";var ut;(e=>(e.baseUrl="Serenity.Demo.Northwind/Supplier",e.Methods={Create:"Serenity.Demo.Northwind/Supplier/Create",Update:"Serenity.Demo.Northwind/Supplier/Update",Delete:"Serenity.Demo.Northwind/Supplier/Delete",Retrieve:"Serenity.Demo.Northwind/Supplier/Retrieve",List:"Serenity.Demo.Northwind/Supplier/List"},["Create","Update","Delete","Retrieve","List"].forEach(r=>{e[r]=function(s,a,l){return yl(e.baseUrl+"/"+r,s,a,l)}})))(ut||(ut={}));import{ColumnsBase as gl,fieldsProxy as hl}from"@serenity-is/corelib";var or=class or extends gl{};o(or,"TerritoryColumns"),or.columnsKey="Northwind.Territory",or.Fields=hl();var Pr=or;import{StringEditor as Rl,LookupEditor as Sl,PrefixedContext as vl,initFormType as xl}from"@serenity-is/corelib";var et=class et extends vl{constructor(t){if(super(t),!et.init){et.init=!0;var e=Rl,r=Sl;xl(et,["TerritoryID",e,"TerritoryDescription",e,"RegionID",r])}}};o(et,"TerritoryForm"),et.formKey="Northwind.Territory";var ir=et;import{getLookup as Dl,getLookupAsync as Cl,fieldsProxy as Pl}from"@serenity-is/corelib";var Q=class Q{static getLookup(){return Dl("Northwind.Territory")}static getLookupAsync(){return E(this,null,function*(){return Cl("Northwind.Territory")})}};o(Q,"TerritoryRow"),Q.idProperty="ID",Q.nameProperty="TerritoryID",Q.localTextPrefix="Northwind.Territory",Q.lookupKey="Northwind.Territory",Q.deletePermission="Northwind:General",Q.insertPermission="Northwind:General",Q.readPermission="Northwind:General",Q.updatePermission="Northwind:General",Q.Fields=Pl();var ht=Q;import{serviceRequest as Nl}from"@serenity-is/corelib";var Rt;(e=>(e.baseUrl="Serenity.Demo.Northwind/Territory",e.Methods={Create:"Serenity.Demo.Northwind/Territory/Create",Update:"Serenity.Demo.Northwind/Territory/Update",Delete:"Serenity.Demo.Northwind/Territory/Delete",Retrieve:"Serenity.Demo.Northwind/Territory/Retrieve",List:"Serenity.Demo.Northwind/Territory/List"},["Create","Update","Delete","Retrieve","List"].forEach(r=>{e[r]=function(s,a,l){return Nl(e.baseUrl+"/"+r,s,a,l)}})))(Rt||(Rt={}));import{Decorators as El,EntityDialog as wl}from"@serenity-is/corelib";var he=class extends wl{constructor(){super(...arguments);this.form=new Ft(this.idPrefix)}getFormKey(){return Ft.formKey}getRowDefinition(){return Se}getService(){return lt.baseUrl}};o(he,"CategoryDialog"),he=m([El.registerClass("Serenity.Demo.Northwind.CategoryDialog")],he);import{Decorators as Ll,EntityGrid as Tl}from"@serenity-is/corelib";var St=class extends Tl{getColumnsKey(){return fr.columnsKey}getDialogType(){return he}getRowDefinition(){return Se}getService(){return lt.baseUrl}};o(St,"CategoryGrid"),St=m([Ll.registerClass("Serenity.Demo.Northwind.CategoryGrid")],St);import{Decorators as Ql,EntityDialog as Xl,TabsExtensions as $l,localText as co,reloadLookup as Zl}from"@serenity-is/corelib";import{DialogUtils as Jl}from"@serenity-is/extensions";import{Decorators as zl,SubDialogHelper as jl}from"@serenity-is/corelib";import{Decorators as xi,EntityGrid as Al,EnumEditor as kl,Fluent as Ul,LookupEditor as ql,faIcon as Fl,toId as Ml}from"@serenity-is/corelib";import{ExcelExportHelper as Gl,PdfExportHelper as Bl,ReportHelper as Hl}from"@serenity-is/extensions";import{Decorators as bl,EntityDialog as Il}from"@serenity-is/corelib";import{ReportHelper as Ol}from"@serenity-is/extensions";var pe=class extends Il{constructor(){super(...arguments);this.form=new jt(this.idPrefix)}getFormKey(){return jt.formKey}getRowDefinition(){return ye}getService(){return Xe.baseUrl}getToolbarButtons(){var e=super.getToolbarButtons();return e.push(Ol.createToolButton({title:"Invoice",cssClass:"export-pdf-button",reportKey:"Northwind.OrderDetail",getParams:()=>({OrderID:this.entityId})})),e}updateInterface(){super.updateInterface(),this.toolbar.findButton("export-pdf-button").toggle(this.isEditMode())}};o(pe,"OrderDialog"),pe=m([bl.registerClass("Serenity.Demo.Northwind.OrderDialog")],pe);var Kl=ye.Fields,we=class extends Al{getColumnsKey(){return Sr.columnsKey}getDialogType(){return pe}getRowDefinition(){return ye}getService(){return Xe.baseUrl}getQuickFilters(){var e=super.getQuickFilters();return e.push({type:ql,options:{lookupKey:q.lookupKey,async:!0},field:"ProductID",title:"Contains Product in Details",handler:r=>{this.view.params.ProductID=Ml(r.value)},cssClass:"hidden-xs"}),e}createQuickFilters(){super.createQuickFilters(),this.shippingStateFilter=this.findQuickFilter(kl,Kl.ShippingState)}getButtons(){var e=super.getButtons();return e.push(Gl.createToolButton({grid:this,service:Xe.baseUrl+"/ListExcel",onViewSubmit:()=>this.onViewSubmit(),separator:!0})),e.push(Bl.createToolButton({grid:this,onViewSubmit:()=>this.onViewSubmit()})),e}getColumns(){var e=super.getColumns();return e.splice(1,0,{id:"Print Invoice",field:null,name:"",cssClass:"align-center",format:r=>`<a class="inline-action" data-action="print-invoice" title="invoice"><i class="${Fl("file-pdf","red")}"></i></a>`,width:36,minWidth:36,maxWidth:36}),e}onClick(e,r,s){var f,D;if(super.onClick(e,r,s),Ul.isDefaultPrevented(e))return;var a=this.itemAt(r);let l=(D=(f=e.target)==null?void 0:f.closest(".inline-action"))==null?void 0:D.getAttribute("data-action");l&&(e.preventDefault(),l=="print-invoice"&&Hl.execute({reportKey:"Northwind.OrderDetail",params:{OrderID:a.OrderID}}))}set_shippingState(e){this.shippingStateFilter.value=e==null?"":e.toString()}addButtonClick(){var e=this.view.params.EqualityFilter;this.editItem({CustomerID:e?e.CustomerID:null})}};o(we,"OrderGrid"),we=m([xi.registerClass("Serenity.Demo.Northwind.OrderGrid"),xi.filterable()],we);import{Decorators as Vl,EditorUtils as Wl}from"@serenity-is/corelib";var Le=class extends pe{updateInterface(){super.updateInterface(),Wl.setReadOnly(this.form.CustomerID,!0)}};o(Le,"CustomerOrderDialog"),Le=m([Vl.registerClass("Serenity.Demo.Northwind.CustomerOrderDialog")],Le);var Yl=ye.Fields,Te=class extends we{getDialogType(){return Le}getColumns(){return super.getColumns().filter(e=>e.field!==Yl.CustomerCompanyName)}initEntityDialog(e,r){super.initEntityDialog(e,r),jl.cascade(r,this.domNode.closest(".ui-dialog"))}getButtons(){var e=super.getButtons(),r=e.find(s=>s.action==="add");return r&&(r.disabled=()=>!this.customerID),e}addButtonClick(){this.customerID&&this.editItem({CustomerID:this.customerID})}getInitialTitle(){return null}getGridCanLoad(){return super.getGridCanLoad()&&!!this.customerID}get customerID(){return this._customerID}set customerID(e){this._customerID!==e&&(this._customerID=e,this.setEquality("CustomerID",e),this.refresh(),this.updateInterface())}};o(Te,"CustomerOrdersGrid"),Te=m([zl.registerClass()],Te);var be=class extends Xl{constructor(e){super(e);this.form=new Kt(this.idPrefix);this.byId("NoteList").closest(".field").hide(),this.byId("NoteList").appendTo(this.byId("TabNotes"))}getFormKey(){return Kt.formKey}getRowDefinition(){return ct}getService(){return pt.baseUrl}initDialog(){super.initDialog(),Jl.pendingChangesConfirmation(this.domNode,()=>this.getSaveState()!=this.loadedState)}getSaveState(){try{return JSON.stringify(this.getSaveEntity())}catch(e){return null}}loadResponse(e){super.loadResponse(e),this.loadedState=this.getSaveState()}loadEntity(e){super.loadEntity(e),$l.setDisabled(this.tabs,"Orders",this.isNewOrDeleted()),this.ordersGrid.customerID=e.CustomerID}onSaveSuccess(e){super.onSaveSuccess(e),Zl("Northwind.Customer")}renderContents(){let e=this.useIdPrefix();return g("div",{id:e.Tabs,class:"s-DialogContent",children:[g("ul",{children:[g("li",{children:g("a",{href:"#"+e.TabInfo,children:g("span",{children:co("Db.Northwind.Customer.EntitySingular")})})}),g("li",{children:g("a",{href:"#"+e.TabNotes,children:g("span",{children:co("Db.Northwind.Note.EntityPlural")})})}),g("li",{children:g("a",{href:"#"+e.TabOrders,children:g("span",{children:co("Db.Northwind.Order.EntityPlural")})})})]}),g("div",{id:e.TabInfo,class:"tab-pane s-TabInfo",children:[g("div",{id:e.Toolbar,class:"s-DialogToolbar"}),g("form",{id:e.Form,action:"",class:"s-Form",children:g("div",{id:e.PropertyGrid})})]}),g("div",{id:e.TabNotes,class:"tab-pane s-TabNotes"}),g("div",{id:e.TabOrders,class:"tab-pane s-TabOrders",children:g(Te,{id:e.OrdersGrid,ref:r=>{this.ordersGrid=r,this.ordersGrid.openDialogsAsPanel=!1}})})]})}};o(be,"CustomerDialog"),be=m([Ql.registerClass("Serenity.Demo.Northwind.CustomerDialog")],be);import{Decorators as Di,EntityGrid as _l}from"@serenity-is/corelib";var vt=class extends _l{getColumnsKey(){return gr.columnsKey}getDialogType(){return be}getRowDefinition(){return ct}getService(){return pt.baseUrl}};o(vt,"CustomerGrid"),vt=m([Di.registerClass("Serenity.Demo.Norhtwind.CustomerGrid"),Di.filterable()],vt);import{Decorators as Ci,EntityDialog as ec}from"@serenity-is/corelib";var Ie=class extends ec{constructor(){super(...arguments);this.form=new $t(this.idPrefix)}getFormKey(){return $t.formKey}getRowDefinition(){return q}getService(){return Ne.baseUrl}};o(Ie,"ProductDialog"),Ie=m([Ci.registerClass(),Ci.maximizable()],Ie);import{Decorators as Pi,EntityGrid as tc,LookupEditor as rc,deepClone as oc,formatNumber as Nr,htmlEncode as xt,localText as Ni,notifyError as Ei,parseDecimal as ic,parseInteger as nc,parseQueryString as sc,serviceRequest as ac,toId as lc}from"@serenity-is/corelib";import{ExcelExportHelper as cc,PdfExportHelper as pc}from"@serenity-is/extensions";var Er=q.Fields,Dt=class extends tc{constructor(e){super(e);this.pendingChanges={};this.slickContainer.on("change","input.edit, textarea.edit, select.edit",r=>this.inputsChange(r))}getColumnsKey(){return Qt.columnsKey}getDialogType(){return Ie}getRowDefinition(){return q}getService(){return Ne.baseUrl}getButtons(){var e=super.getButtons();return e.push(cc.createToolButton({grid:this,service:Ne.baseUrl+"/ListExcel",onViewSubmit:()=>this.onViewSubmit(),separator:!0})),e.push(pc.createToolButton({grid:this,onViewSubmit:()=>this.onViewSubmit(),reportTitle:"Product List",columnTitles:{Discontinued:"Dis."},tableOptions:{columnStyles:{ProductID:{cellWidth:25,halign:"right"},Discountinued:{cellWidth:25}}}})),e.push({title:"Save Changes",cssClass:"apply-changes-button disabled",onClick:r=>this.saveClick(),separator:!0}),e}onViewProcessData(e){return this.pendingChanges={},this.setSaveButtonState(),super.onViewProcessData(e)}numericInputFormatter(e){if(e.item.__nonDataRow)return xt(Nr(e.value,"#0.##"));var r="edit numeric",s=e.item,a=this.pendingChanges[s.ProductID];a&&a[e.column.field]!==void 0&&(r+=" dirty");var l=this.getEffectiveValue(s,e.column.field);return"<input type='text' class='"+r+"' data-field='"+e.column.field+"' value='"+Nr(l,"0.##")+"'/>"}stringInputFormatter(e){if(e.item.__nonDataRow)return xt(e.value);var r="edit string",s=e.item,a=this.pendingChanges[s.ProductID],l=e.column;a&&a[l.field]!==void 0&&(r+=" dirty");var f=this.getEffectiveValue(s,l.field);return"<input type='text' class='"+r+"' data-field='"+l.field+"' value='"+xt(f)+"' maxlength='"+l.sourceItem.maxLength+"'/>"}selectFormatter(e,r,s){if(e.item.__nonDataRow)return xt(e.value);var a="edit",l=e.item,f=this.pendingChanges[l.ProductID],D=e.column;f&&f[r]!==void 0&&(a+=" dirty");var B=this.getEffectiveValue(l,r),A="<select class='"+a+"' data-field='"+r+"' style='width: 100%; max-width: 100%'><option value=''>--</option>";for(var w of s.items){let F=w[s.idField];A+="<option value='"+xt(F)+"'",F==B&&(A+=" selected"),A+=">"+xt(w[s.textField])+"</option>"}return A+"</select>"}getEffectiveValue(e,r){var s=this.pendingChanges[e.ProductID];return s&&s[r]!==void 0?s[r]:e[r]}getColumns(){var e=new Qt(super.getColumns()),r=o(a=>this.numericInputFormatter(a),"num"),s=o(a=>this.stringInputFormatter(a),"str");return e.QuantityPerUnit&&(e.QuantityPerUnit.format=s),e.CategoryName&&(e.CategoryName.referencedFields=[Er.CategoryID])&&(e.CategoryName.format=a=>this.selectFormatter(a,Er.CategoryID,Se.getLookup())),e.SupplierCompanyName&&(e.SupplierCompanyName.referencedFields=[Er.SupplierID])&&(e.SupplierCompanyName.format=a=>this.selectFormatter(a,Er.SupplierID,Pe.getLookup())),e.UnitPrice&&(e.UnitPrice.format=r),e.UnitsInStock&&(e.UnitsInStock.format=r),e.UnitsOnOrder&&(e.UnitsOnOrder.format=r),e.ReorderLevel&&(e.ReorderLevel.format=r),e.valueOf()}inputsChange(e){var Ue;var r=this.slickGrid.getCellFromEvent(e),s=this.itemAt(r.row),a=e.target,l=a.getAttribute("data-field"),f=((Ue=a.value)==null?void 0:Ue.trim())||null,D=this.pendingChanges[s.ProductID],B=this.getEffectiveValue(s,l),A;a.classList.contains("numeric")?A=Nr(B,"0.##"):A=B;var w;if(l==="UnitPrice"){if(w=ic(f!=null?f:""),w==null||isNaN(w)){Ei(Ni("Validation.Decimal"),"",null),a.value=A,a.focus();return}}else if(a.classList.contains("numeric")){var F=nc(f!=null?f:"");if(isNaN(F)||F>32767||F<0){Ei(Ni("Validation.Integer"),"",null),a.value=A,a.focus();return}w=F}else a.tagName==="SELECT"?w=lc(a.value):w=f;D||(this.pendingChanges[s.ProductID]=D={}),D[l]=w,s[l]=w,this.view.refresh(),a.classList.contains("numeric")&&(w=Nr(w,"0.##")),a.value=w,a.classList.add("dirty"),this.setSaveButtonState()}setSaveButtonState(){this.toolbar.findButton("apply-changes-button").toggleClass("disabled",Object.keys(this.pendingChanges).length===0)}saveClick(){if(Object.keys(this.pendingChanges).length!==0){var e=Object.keys(this.pendingChanges),r=-1,s=this;o(function a(){if(++r>=e.length){s.refresh();return}var l=e[r],f=oc(s.pendingChanges[l]);f.ProductID=l,ac(Ne.Methods.Update,{EntityId:l,Entity:f},D=>{delete s.pendingChanges[l],a()})},"saveNext")()}}getQuickFilters(){var e=super.getQuickFilters(),r=sc();if(r.cat){var s=e.find(a=>a.field==q.Fields.CategoryID);s&&(s.init=a=>{a.element.getWidget(rc).value=r.cat})}return e}};o(Dt,"ProductGrid"),Dt=m([Pi.registerClass(),Pi.filterable()],Dt);import{Decorators as dc,EntityDialog as uc}from"@serenity-is/corelib";var Oe=class extends uc{constructor(){super(...arguments);this.form=new Jt(this.idPrefix)}getFormKey(){return Jt.formKey}getRowDefinition(){return mt}getService(){return ft.baseUrl}};o(Oe,"RegionDialog"),Oe=m([dc.registerClass("Serenity.Demo.Northwind.RegionDialog")],Oe);import{Decorators as mc,EntityGrid as fc}from"@serenity-is/corelib";var Ct=class extends fc{getColumnsKey(){return xr.columnsKey}getDialogType(){return Oe}getRowDefinition(){return mt}getService(){return ft.baseUrl}};o(Ct,"RegionGrid"),Ct=m([mc.registerClass("Serenity.Demo.Northwind.RegionGrid")],Ct);import{Decorators as yc,EntityDialog as gc}from"@serenity-is/corelib";var Ae=class extends gc{constructor(){super(...arguments);this.form=new tr(this.idPrefix)}getFormKey(){return tr.formKey}getRowDefinition(){return yt}getService(){return gt.baseUrl}};o(Ae,"ShipperDialog"),Ae=m([yc.registerClass()],Ae);import{Decorators as hc,EntityGrid as Rc}from"@serenity-is/corelib";var Pt=class extends Rc{getColumnsKey(){return Dr.columnsKey}getDialogType(){return Ae}getRowDefinition(){return yt}getService(){return gt.baseUrl}};o(Pt,"ShipperGrid"),Pt=m([hc.registerClass()],Pt);import{Decorators as Sc,EntityGrid as vc}from"@serenity-is/corelib";var Nt=class extends vc{getColumnsKey(){return Cr.columnsKey}getDialogType(){return ge}getRowDefinition(){return Pe}getService(){return ut.baseUrl}};o(Nt,"SupplierGrid"),Nt=m([Sc.registerClass("Serenity.Demo.Northwind.SupplierGrid")],Nt);import{Decorators as xc,EntityDialog as Dc}from"@serenity-is/corelib";var ke=class extends Dc{constructor(){super(...arguments);this.form=new ir(this.idPrefix)}getFormKey(){return ir.formKey}getRowDefinition(){return ht}getService(){return Rt.baseUrl}};o(ke,"TerritoryDialog"),ke=m([xc.registerClass("Serenity.Demo.Northwind.TerritoryDialog")],ke);import{Decorators as Cc,EntityGrid as Pc}from"@serenity-is/corelib";var Et=class extends Pc{getColumnsKey(){return Pr.columnsKey}getDialogType(){return ke}getRowDefinition(){return ht}getService(){return Rt.baseUrl}};o(Et,"TerritoryGrid"),Et=m([Cc.registerClass("Serenity.Demo.Northwind.TerritoryGrid")],Et);export{fr as CategoryColumns,he as CategoryDialog,Ft as CategoryForm,St as CategoryGrid,Jo as CategoryLangRow,_o as CategoryLangService,Se as CategoryRow,lt as CategoryService,gr as CustomerColumns,ei as CustomerCustomerDemoRow,ti as CustomerDemographicRow,ri as CustomerDetailsRow,be as CustomerDialog,xe as CustomerEditor,Kt as CustomerForm,vt as CustomerGrid,ci as CustomerGrossSalesRow,Le as CustomerOrderDialog,Te as CustomerOrdersGrid,pi as CustomerRepresentativesRow,ct as CustomerRow,pt as CustomerService,We as EmployeeFormatter,He as EmployeeListFormatter,yr as EmployeeRow,di as EmployeeTerritoryRow,ze as FreightFormatter,ao as Gender,fe as NoteDialog,ui as NoteRow,ve as NotesEditor,Sr as OrderColumns,vr as OrderDetailColumns,De as OrderDetailDialog,zt as OrderDetailForm,dt as OrderDetailRow,mi as OrderDetailService,Ce as OrderDetailsEditor,pe as OrderDialog,jt as OrderForm,we as OrderGrid,ye as OrderRow,Xe as OrderService,lo as OrderShippingState,fi as PermissionKeys,I as PhoneEditor,Qt as ProductColumns,Ie as ProductDialog,$t as ProductForm,Dt as ProductGrid,yi as ProductLangRow,gi as ProductLangService,hi as ProductLogRow,q as ProductRow,Ne as ProductService,xr as RegionColumns,Oe as RegionDialog,Jt as RegionForm,Ct as RegionGrid,mt as RegionRow,ft as RegionService,Ri as SalesByCategoryColumns,Si as SalesByCategoryRow,vi as SalesByCategoryService,Dr as ShipperColumns,Ae as ShipperDialog,tr as ShipperForm,je as ShipperFormatter,Pt as ShipperGrid,yt as ShipperRow,gt as ShipperService,Cr as SupplierColumns,ge as SupplierDialog,Xt as SupplierForm,Nt as SupplierGrid,Pe as SupplierRow,ut as SupplierService,Pr as TerritoryColumns,ke as TerritoryDialog,ir as TerritoryForm,Et as TerritoryGrid,ht as TerritoryRow,Rt as TerritoryService};
/*! Bundled license information:

dompurify/dist/purify.js:
  (*! @license DOMPurify 3.0.11 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.0.11/LICENSE *)
*/
//# sourceMappingURL=index.js.map
